#### Docker ####
#cont hail_image {
#    type "docker"
#    image_site "casa-dtn"
#    image "http://casa-dtn/~ldm/containers/casa-hail.tar"
#    mount "/etc/hosts:/etc/hosts:ro"
#    profile env "SEQEXEC_CPUS" "4"
##    mount "/nfs/shared/ldm:/nfs/shared/ldm"
##    profile env "PEGASUS_HOME" "/nfs/shared/ldm/pegasus-4.9.3panorama"
#}

#### Singularity ####
cont hail_image {
    type "singularity"
    image_site "casa-dtn"
    image "http://casa-dtn/~ldm/containers/casa-hail.sif"
    mount "/etc/hosts:/etc/hosts:ro"
    profile env "SEQEXEC_CPUS" "4"
#    mount "/nfs/shared/ldm:/nfs/shared/ldm"
#    profile env "PEGASUS_HOME" "/nfs/shared/ldm/pegasus-4.9.3panorama"
}

tr prepare_subwf {
    site local {
        pfn "${PWD}/bin/prepare_subwf.sh"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
    }
}

#tr nexrad_daxgen {
#    site local {
#        pfn "${PWD}/bin/nexrad_daxgen.py"
#        arch "x86_64"
#        os "LINUX"
#        type "STAGEABLE"
#    }
#}

#tr casa_watch_http {
#    site local {
#        pfn "${PWD}/bin/casa_watch_http.py"
#        arch "x86_64"
#        os "LINUX"
#        type "STAGEABLE"
#    }
#}

tr gunzip {
    site condorpool {
        pfn "/bin/gunzip"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
        profile pegasus "label" "casa_untar_job"
        profile pegasus "cores" "4"
        profile pegasus "memory" "2048"
        profile env "SEQEXEC_CPUS" "4"
    }
}

tr hydroclass {
    site condorpool {
        container "hail_image"
        pfn "/opt/hydroclass/hydroclass"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
        profile pegasus "label" "casa_job"
        #profile pegasus "cores" "1"
    }
}

tr RadxConvert {
    site condorpool {
        container "hail_image"
        pfn "/opt/hydroclass/RadxConvert"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
        profile pegasus "label" "casa_job"
	}
}

tr Radx2Grid {
    site condorpool {
        container "hail_image"
        pfn "/opt/hydroclass/Radx2Grid"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
        profile pegasus "label" "casa_job"
    }
}

tr hc_composite {
    site condorpool {
        container "hail_image"
        pfn "/opt/hydroclass/hc_composite"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
        profile pegasus "label" "casa_job"
    }
}

tr netcdf2png {
    site condorpool {
        container "hail_image"
        pfn "/opt/hydroclass_netcdf2png/netcdf2png"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
    }
}

tr nc2png {
   site condorpool {
   	container "hail_image"	
	pfn "/opt/nc2png/nc2png"
	arch "x86_64"
	os "LINUX"
	type "INSTALLED"
    }
}

tr merged_hydroclass_netcdf2png {							   
    site condorpool {
        container "hail_image"
        pfn "/opt/hydroclass_netcdf2png/merged_hydroclass_netcdf2png"	
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
    }
}

tr d3_hmt {
    site condorpool {
        container "hail_image"
        pfn "/opt/d3_hmt/d3_hmt"
        arch "x86_64"
        os "LINUX"
        type "INSTALLED"
    }
}

#tr pegasus::worker {
#        site condorpool {
#               pfn "http://casa-dtn/~ldm/pegasus/pegasus-worker-4.9.3panorama-x86_64_rhel_7.tar.gz"
#               arch "x86_64"
#               os "LINUX"
#               type "INSTALLED"
#        }
#}

